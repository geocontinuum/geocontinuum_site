!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};e.m=t,e.c=n,e.p="",e(0)}({0:function(t,exports,e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e(437),function(t){var e=window.dragifywp_app_footer_data.label,i=e.charAt(0).toUpperCase()+e.substr(1),o=t.module("dragifywpPageFooterApp",["dragifywpPopup"]);o.__config=window.dragifywp_app_footer_data,o.controller("PageFooterController",function(){}),o.config(["$provide","$httpProvider",function(t,e){t.factory("lbHttpInterceptor",["$q","$rootScope",function(t,e){return{request:function(e){return e.headers["X-WP-Nonce"]=o.__config.nonce,e||t.when(e)},responseError:function(n){return void 0!==n.data&&"rest_cookie_invalid_nonce"==n.data.code&&e.$emit("expired_session"),t.reject(n)}}}]),e.interceptors.push("lbHttpInterceptor")}]).config(["$compileProvider",function(t){t.debugInfoEnabled(o.__config.enable_debug)}]),o.component("pageFooterMetabox",{controller:["$scope","$http","$DragifyWPPopup","$rootScope",function(i,a,s,r){var d=this,c={};c[e]="primary";var l={};if(d.items=[],void 0!=n(o.__config))try{l=o.__config.setting,d.items=o.__config.items}catch(t){}d.model=t.merge(c,l),this.syncing=!1,this.sync=function(){this.syncing=!0,a({method:"GET",url:o.__config.api+"/"+e+"s",data:{}}).then(function(e){t.isArray(e.data)&&(d.syncing=!1,d.items=e.data)},function(t){s.show({title:"Try it Later",message:"Cannot sync data now!"}),d.syncing=!1})},r.$on("expired_session",function(){document.location.replace(o.__config.login_url)})}],template:'<input type="hidden" name="dragifywp-page-'+e+'-setting" value="{{$ctrl.model}}" id="dragifywp-page-'+e+'-setting"><div class="dragifywp-smb"><mb-header model="$ctrl.model"></mb-header><div class="dragifywp-smb__body"><div class="dragifywp-smb__listSelection" ng-class="{\'dragifywp-smb__listSelection--syncing\':$ctrl.syncing}"><div class="dragifywp-smb__selection" list-selection ng-model="$ctrl.model[\''+e+"']\" ng-list=\"$ctrl.items\" ng-default=\"[{id:'none', name:'No "+i+"'},{id:'primary', name:'Use Primary "+i+'\', selected:\'selected\'}]"></div><span ng-click="$ctrl.sync()" class="dragifywp-smb__syncBtn dashicons dashicons-update" title="Sync data"></span></div></div><mb-footer selected="$ctrl.model[\''+e+"']\"></mb-footer></div>",bindings:{postId:"@"}}),o.component("mbHeader",{controller:["$timeout","$http","$DragifyWPPopup",function(t,n,i){var a=this;this.state="disabled";var s=JSON.stringify(this.model);this.save=function(r){r.preventDefault(),"ready"==a.state&&(a.state="saving",n({method:"POST",url:o.__config.api+"/page-"+e+"-setting",data:{id:o.__config.post_id,settings:JSON.stringify(a.model)}}).then(function(e){a.state="saved",t(function(){s=JSON.stringify(a.model),a.state="disabled"},1e3)},function(t){i.show({title:"Try it Later",message:"Cannot save data now!"}),a.state="ready"}))},a.getState=function(){return"disabled"==a.state&&JSON.stringify(a.model)!==s&&(a.state="ready"),a.state}}],template:'<div class="dragifywp-smb__header"><h6 class="dragifywp-smb__title">'+i+'</h6><button class="dragifywp-smb__saveBtn dragifywp-ui__btn dragifywp-ui__btn--primary" ng-class="\'dragifywp-smb__saveBtn--\'+$ctrl.getState()" ng-click="$ctrl.save($event)"><span>Saved</span><span>Save</span><span></span><span><i class="fa fa-check" aria-hidden="true"></i></span></button></div>',bindings:{model:"<"}}),o.component("mbFooter",{controller:function(){},template:'<div class="dragifywp-smb__footer"><a class="dragifywp-smb__openCrud" href="'+o.__config.list_url+'" target="_blank">'+i+' List</a><a class="dragifywp-smb__editItem" href="'+o.__config.edit_url+"&post_id="+o.__config.post_id+"&"+e+'_id={{$ctrl.selected}}" target="_blank" ng-disabled="$ctrl.selected == \'none\'">Edit</a></div>',bindings:{selected:"<"}}),o.directive("listSelection",["$http",function(t){return{restrict:"A",scope:{ngModel:"=",ngList:"=",ngDefault:"="},link:function(t,e,n){var i=Date.now(),o=jQuery('<select id="uq-'+i+'" style="width: 100%"></select>');e.append(o),o.select2(),t.$watch("ngList",function(){for(var e="",n=[].concat(t.ngDefault).concat(t.ngList),i=[],a=void 0,s=!1,r=0,d=n.length;r<d;r++){var c=n[r],l={id:c.id,name:c.name};t.ngModel==c.id&&(l.selected=!0,s=!0),c.hasOwnProperty("selected")&&c.selected&&(a=r),i[r]=l}!s&&a&&(i[a].selected=!0);for(var p=0,f=i.length;p<f;p++){var u=i[p],g=u.hasOwnProperty("selected")&&u.selected?'selected="selected"':"";e+='<option value="'+u.id+'" '+g+">"+u.name+"</option>"}o.html(e),o.on("change",function(){t.$apply(function(){t.ngModel=o.val()})})},!0)}}}]),t.element(document).ready(function(){t.bootstrap(document.getElementById("dragifywp-page-footer"),["dragifywpPageFooterApp"])})}(window.angular)},437:function(t,exports){"use strict";!function(t){t.module("dragifywpPopup",[]).factory("$DragifyWPPopup",function(){return{show:function(e){var n=t.element('<div class="dragifywp-bs__fsPopup"><h6 class="dragifywp-bs__fsPopup__title">'+e.title+'</h6><div class="dragifywp-bs__fsPopup__body">'+e.message+'</div><div class="dragifywp-bs__fsPopup__footer"></div></div><div class="dragifywp-bs__fsPopup__backdrop"></div>'),i=n.find(".dragifywp-bs__fsPopup__footer");if(Array.isArray(e.buttons))e.buttons.forEach(function(e){var n=t.element('<button class="dragifywp-ui__btn"></button>');e.hasOwnProperty("text")?n.html(e.text):n.html("Dismiss"),e.hasOwnProperty("class")?n.addClass(e.class):n.addClass("dragifywp-ui__btn--primary"),n.on("click",function(t){t.preventDefault(),"function"==typeof e.callback&&e.callback(),a()}),i.append(n)});else{var o=t.element('<button class="dragifywp-ui__btn dragifywp-ui__btn--primary">Dismiss</button>');i.append(o),o.on("click",function(t){t.preventDefault(),a()})}t.element("body").append(n),"function"==typeof e.onInit&&e.onInit(n);var a=function(){return n.remove(),document.removeEventListener("keydown",s),"function"==typeof e.onClose&&e.onClose(n),!0},s=function(t){27==t.keyCode&&a()};document.addEventListener("keydown",s)}}})}(window.angular)}});